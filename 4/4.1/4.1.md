# 4.1. Disponibilidad

## Modulo de recomendaciones

### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                             | **Fuente del Estímulo** | **Artefacto**                | **Entorno**                          | **Respuesta**                                        | **Medida de Respuesta**                          |
|------------------|-------------------------|------------------------------------------|-------------------------|------------------------------|--------------------------------------|-----------------------------------------------------|-------------------------------------------------|
| ESC-REC01        | Disponibilidad          | Alta demanda de solicitudes              | Usuarios                | Módulo de recomendaciones    | Operación durante picos de actividad | El sistema ofrece respuestas rápidas y sin interrupciones | Respuesta a solicitudes en menos de 2 segundos  |

### Táctica Elegida
Para este escenario, se elige la táctica de **caché de resultados**. Esta táctica implica almacenar respuestas previamente calculadas para las recomendaciones más comunes o predecibles, lo que permite al sistema responder rápidamente sin tener que recalcular cada vez.

### Documentación de la Decisión (ADR)

**Título**:  
- Implementación de caché de resultados para optimizar la disponibilidad en el módulo de Recomendaciones

**Contexto**:  
- El módulo de recomendaciones es un componente crucial de la plataforma Turi, que influye directamente en la experiencia del usuario al proporcionar sugerencias personalizadas basadas en sus preferencias y comportamientos anteriores. Durante periodos de alta actividad turística, la demanda de recomendaciones puede sobrecargar el sistema, causando tiempos de respuesta lentos y una potencial degradación del servicio.

**Alternativas**:
1. **Caché de resultados**  
   - Almacena las respuestas de recomendaciones que son frecuentemente solicitadas.
   - Reduce la carga en los servidores al evitar cálculos repetitivos y disminuye los tiempos de respuesta.
   - Requiere un mecanismo de actualización periódica para mantener la relevancia de los datos.

2. **Aumento de la capacidad del servidor**  
   - Escalar los recursos del servidor para manejar picos de demanda.
   - Aumenta la capacidad de procesamiento pero puede ser costoso y no siempre es eficiente desde el punto de vista del uso de recursos.

**Criterios de elección**:  
- Impacto en la experiencia del usuario y tiempo de respuesta.
- Costo de implementación y operación.
- Flexibilidad y escalabilidad del sistema.
- Mantenimiento de la relevancia y precisión de las recomendaciones.

**Decisión**:  
- Se decide implementar **caché de resultados** para el módulo de recomendaciones.

**Sustento**:  
- Esta táctica mejorará significativamente los tiempos de respuesta durante los picos de demanda, manteniendo la experiencia del usuario fluida y satisfactoria. Además, es una solución costo-efectiva en comparación con el aumento permanente de la capacidad del servidor. El sistema de caché permitirá a Turi manejar un mayor volumen de solicitudes con la infraestructura existente, asegurando que los usuarios reciban recomendaciones rápidas y precisas.

### Escenario 2


| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                             | **Fuente del Estímulo** | **Artefacto**                | **Entorno**                          | **Respuesta**                                        | **Medida de Respuesta**                          |
|------------------|-------------------------|------------------------------------------|-------------------------|------------------------------|--------------------------------------|-----------------------------------------------------|-------------------------------------------------|
| ESC-REC032       | Disponibilidad          | Fallo en el sistema de base de datos     | Sistema de base de datos | Módulo de Recomendaciones    | Operación durante horario laboral y alta demanda | El sistema mantiene la capacidad de proporcionar recomendaciones limitadas y activa mecanismos de recuperación | Restaurar la funcionalidad completa en menos de 5 minutos |

### Táctica Elegida
Para este escenario, se selecciona la táctica de **replicación de base de datos**. Esto implica tener una o más copias secundarias del sistema de base de datos que pueden tomar el control automáticamente en caso de fallo del sistema principal.

### Documentación de la Decisión (ADR)

**Título**:  
- Implementación de replicación de base de datos para asegurar la disponibilidad en el módulo de recomendaciones

**Contexto**:  
- El módulo de recomendaciones depende críticamente de los datos almacenados en la base de datos, incluyendo preferencias de usuario, historial de navegación y datos analíticos. Un fallo en la base de datos principal puede interrumpir este servicio, afectando negativamente la experiencia del usuario y la operatividad de la plataforma.

**Alternativas**:
1. **Replicación de base de datos**  
   - Configuración de una o más bases de datos secundarias que se mantienen sincronizadas con la principal.
   - Proporciona una conmutación rápida a una réplica en caso de fallo, minimizando el tiempo de inactividad.
   - Requiere recursos adicionales para la gestión y mantenimiento de las réplicas.

2. **Backups regulares y restauración rápida**  
   - Realización de backups periódicos y restauración en caso de fallos.
   - Puede implicar tiempos de restauración más largos y pérdida de transacciones recientes, dependiendo de la frecuencia de los backups.

**Criterios de elección**:  
- Importancia de la continuidad del servicio sin interrupciones.
- Tiempo de recuperación tras un fallo.
- Costo de implementación y operación.
- Fiabilidad y actualización en tiempo real de los datos.

**Decisión**:  
- Se decide implementar **replicación de base de datos**.

**Sustento**:  
- La replicación de base de datos es la mejor opción para garantizar que el módulo de recomendaciones pueda continuar operando sin interrupciones significativas en caso de fallo de la base de datos. Esta táctica permite una conmutación rápida y eficaz a una base de datos secundaria, asegurando que la plataforma permanezca funcional y que los datos estén siempre actualizados y disponibles. Aunque requiere una inversión inicial y mantenimiento continuo, los beneficios en términos de disponibilidad y experiencia del usuario justifican claramente los costos asociados.