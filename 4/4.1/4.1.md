# 4.1. Disponibilidad

## Modulo de recomendaciones
### Escenario 1
| **Cod Escenario** | **Atributo de Calidad** | **Est�mulo**                             | **Fuente del Est�mulo** | **Artefacto**                | **Entorno**                          | **Respuesta**                                        | **Medida de Respuesta**                          |
|------------------|-------------------------|------------------------------------------|-------------------------|------------------------------|--------------------------------------|-----------------------------------------------------|-------------------------------------------------|
| ESC-REC01        | Disponibilidad          | Alta demanda de solicitudes              | Usuarios                | M�dulo de recomendaciones    | Operaci�n durante picos de actividad | El sistema ofrece respuestas r�pidas y sin interrupciones | Respuesta a solicitudes en menos de 2 segundos  |

### T�ctica Elegida
Para este escenario, se elige la t�ctica de **cach� de resultados**. Esta t�ctica implica almacenar respuestas previamente calculadas para las recomendaciones m�s comunes o predecibles, lo que permite al sistema responder r�pidamente sin tener que recalcular cada vez.

### Documentaci�n de la Decisi�n (ADR)

**T�tulo**:  
- Implementaci�n de cach� de resultados para optimizar la disponibilidad en el m�dulo de Recomendaciones

**Contexto**:  
- El m�dulo de recomendaciones es un componente crucial de la plataforma Turi, que influye directamente en la experiencia del usuario al proporcionar sugerencias personalizadas basadas en sus preferencias y comportamientos anteriores. Durante periodos de alta actividad tur�stica, la demanda de recomendaciones puede sobrecargar el sistema, causando tiempos de respuesta lentos y una potencial degradaci�n del servicio.

**Alternativas**:
1. **Cach� de resultados**  
   - Almacena las respuestas de recomendaciones que son frecuentemente solicitadas.
   - Reduce la carga en los servidores al evitar c�lculos repetitivos y disminuye los tiempos de respuesta.
   - Requiere un mecanismo de actualizaci�n peri�dica para mantener la relevancia de los datos.

2. **Aumento de la capacidad del servidor**  
   - Escalar los recursos del servidor para manejar picos de demanda.
   - Aumenta la capacidad de procesamiento pero puede ser costoso y no siempre es eficiente desde el punto de vista del uso de recursos.

**Criterios de elecci�n**:  
- Impacto en la experiencia del usuario y tiempo de respuesta.
- Costo de implementaci�n y operaci�n.
- Flexibilidad y escalabilidad del sistema.
- Mantenimiento de la relevancia y precisi�n de las recomendaciones.

**Decisi�n**:  
- Se decide implementar **cach� de resultados** para el m�dulo de recomendaciones.

**Sustento**:  
- Esta t�ctica mejorar� significativamente los tiempos de respuesta durante los picos de demanda, manteniendo la experiencia del usuario fluida y satisfactoria. Adem�s, es una soluci�n costo-efectiva en comparaci�n con el aumento permanente de la capacidad del servidor. El sistema de cach� permitir� a Turi manejar un mayor volumen de solicitudes con la infraestructura existente, asegurando que los usuarios reciban recomendaciones r�pidas y precisas.

### Escenario 2
| **Cod Escenario** | **Atributo de Calidad** | **Est�mulo**                             | **Fuente del Est�mulo** | **Artefacto**                | **Entorno**                          | **Respuesta**                                        | **Medida de Respuesta**                          |
|------------------|-------------------------|------------------------------------------|-------------------------|------------------------------|--------------------------------------|-----------------------------------------------------|-------------------------------------------------|
| ESC-REC02       | Disponibilidad          | Fallo en el sistema de base de datos     | Sistema de base de datos | M�dulo de Recomendaciones    | Operaci�n durante horario laboral y alta demanda | El sistema mantiene la capacidad de proporcionar recomendaciones limitadas y activa mecanismos de recuperaci�n | Restaurar la funcionalidad completa en menos de 5 minutos |

### T�ctica Elegida
Para este escenario, se selecciona la t�ctica de **replicaci�n de base de datos**. Esto implica tener una o m�s copias secundarias del sistema de base de datos que pueden tomar el control autom�ticamente en caso de fallo del sistema principal.

### Documentaci�n de la Decisi�n (ADR)

**T�tulo**:  
- Implementaci�n de replicaci�n de base de datos para asegurar la disponibilidad en el m�dulo de recomendaciones

**Contexto**:  
- El m�dulo de recomendaciones depende cr�ticamente de los datos almacenados en la base de datos, incluyendo preferencias de usuario, historial de navegaci�n y datos anal�ticos. Un fallo en la base de datos principal puede interrumpir este servicio, afectando negativamente la experiencia del usuario y la operatividad de la plataforma.

**Alternativas**:
1. **Replicaci�n de base de datos**  
   - Configuraci�n de una o m�s bases de datos secundarias que se mantienen sincronizadas con la principal.
   - Proporciona una conmutaci�n r�pida a una r�plica en caso de fallo, minimizando el tiempo de inactividad.
   - Requiere recursos adicionales para la gesti�n y mantenimiento de las r�plicas.

2. **Backups regulares y restauraci�n r�pida**  
   - Realizaci�n de backups peri�dicos y restauraci�n en caso de fallos.
   - Puede implicar tiempos de restauraci�n m�s largos y p�rdida de transacciones recientes, dependiendo de la frecuencia de los backups.

**Criterios de elecci�n**:  
- Importancia de la continuidad del servicio sin interrupciones.
- Tiempo de recuperaci�n tras un fallo.
- Costo de implementaci�n y operaci�n.
- Fiabilidad y actualizaci�n en tiempo real de los datos.

**Decisi�n**:  
- Se decide implementar **replicaci�n de base de datos**.

**Sustento**:  
- La replicaci�n de base de datos es la mejor opci�n para garantizar que el m�dulo de recomendaciones pueda continuar operando sin interrupciones significativas en caso de fallo de la base de datos. Esta t�ctica permite una conmutaci�n r�pida y eficaz a una base de datos secundaria, asegurando que la plataforma permanezca funcional y que los datos est�n siempre actualizados y disponibles. Aunque requiere una inversi�n inicial y mantenimiento continuo, los beneficios en t�rminos de disponibilidad y experiencia del usuario justifican claramente los costos asociados.


## Blog
| **Cod Escenario** | **Atributo de Calidad** | **Estímulo** | **Fuente del Estímulo** | **Artefacto** | **Entorno** | **Respuesta**| **Medida de Respuesta**|
|----------|------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| ESC-01 | Disponibilidad | Caída de conexión a la base de datos | Base de datos  | Módulo de Blog | Operación normal con actividad moderada| El sistema sigue permitiendo la visualización de publicaciones y comentarios recientes | Disponibilidad del 99.9% en la recuperación de datos |


### Táctica Elegida
Para garantizar que, en caso de una caída de la conexión a la base de datos, el sistema continúe mostrando las publicaciones recientes del blog, se elige la táctica de Replicación de Datos, que permitirá una alta disponibilidad de la información.
### Escenario 1
Consideremos el siguiente escenario para Turi

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| ITN-01           | Disponibilidad           | Fallo en el servidor de base de datos  | Servidor de la nube      | Módulo de Itinerario Personalizable | Operación en horario laboral                | El sistema cambia a un servidor de respaldo   | El sistema mantiene una disponibilidad del 99.9% anual |


### Táctica Elegida
En este caso, para poder llegar a los niveles de respuesta deseados según el escenario (99.9% anual) se está eligiendo la táctica de Redundancia Pasiva. A continuación documentamos los detalles de la decisión.

### Documentación de la Decisión (ADR)

**Título**:  
- Elección entre replicación de datos vs caché local para el Módulo de Blog.
  
**Contexto**:  
- El blog permite a los usuarios visualizar y comentar en publicaciones, así como interactuar con hashtags y categorías. En caso de que la conexión a la base de datos se caiga, es crucial que el módulo pueda seguir operando, permitiendo al menos la visualización de las publicaciones y comentarios recientes para evitar una interrupción visible para los usuarios. La plataforma cuenta con un backup generado cada 2 semanas, lo que facilita la aplicación de tácticas de replicación o almacenamiento en caché.

**Alternativas**:
1. **Replicación de datos**  
   - Los datos son replicados en tiempo real en bases de datos secundarias. En caso de una caída en la conexión con la base de datos principal, el sistema puede redirigir las consultas a la base de datos replicada.
   - Garantiza una alta disponibilidad de los datos y minimiza los tiempos de inactividad.
   - Mayor complejidad en la sincronización y administración de bases de datos.

2. **Caché local**  
   - Los datos más recientes se almacenan temporalmente en caché en los servidores locales. Si la base de datos no está disponible, el sistema sirve la información desde el caché..
   - Simplicidad de implementación y bajo costo.
   - Puede no reflejar cambios recientes en tiempo real, pero sigue ofreciendo una solución viable para la mayoría de los casos de uso de visualización.

**Criterios de Elección**:  
- Necesidad de mantener la visualización de contenido reciente incluso con problemas en la base de datos.
- Impacto en la experiencia del usuario.
- Complejidad y costo de implementación.
- Actualización de datos en tiempo real.

**Decisión**:  
Se elige **Replicación de Datos** para el módulo de Blog.

**Sustento**:  
- Debido a la naturaleza dinámica del módulo de Blog, en el que los usuarios pueden publicar contenido nuevo y comentar constantemente, la replicación de datos asegura que el sistema siga mostrando información precisa y actualizada en todo momento. Aunque la caché local podría ofrecer una solución más sencilla, la replicación proporciona mayor confiabilidad en la recuperación y consistencia de los datos en caso de fallos de conexión, lo cual es vital para la continuidad y calidad del servicio que se espera de la plataforma.


## Modulo de Itinerario
- Elección entre Redundancia Pasiva vs Redundancia Activa para el Módulo de Itinerario Personalizable.

**Contexto**:  
- El módulo de itinerario maneja datos que los usuarios necesitan de forma constante para planificar sus viajes. Si el servidor de la base de datos falla, los usuarios no podrán acceder a su itinerario. Como la planificación de viajes no es una tarea crítica en tiempo real, tolera tiempos de recuperación breves, por lo que es viable implementar una redundancia pasiva.

**Alternativas**:
1. **Redundancia Pasiva**  
   - Se mantiene un servidor de respaldo actualizado periódicamente. Si el servidor principal falla, el servidor de respaldo se activa para continuar las operaciones.
   - Menor costo operativo, aunque tiene tiempos de conmutación más largos (comparado con la redundancia activa).
   - Adecuado para escenarios donde el tiempo de recuperación no afecta gravemente la experiencia del usuario.

2. **Redundancia Pasiva**  
   - Varios servidores están activos y procesan las solicitudes en paralelo. Si uno falla, otro asume las tareas automáticamente sin interrupciones.
   - Requiere mayor inversión en infraestructura y monitoreo constante, lo cual puede no ser necesario para un módulo no crítico como el de itinerarios.

**Criterios de Elección**:  
- Costo de operación.
- Importancia del tiempo de inactividad.
- Impacto en la experiencia del usuario.
- Frecuencia de cambios y actualizaciones en el servidor de respaldo.

**Decisión**:  
- Se elige la **Redundancia Pasiva**.

**Sustento**:  
- Dado que el módulo de itinerarios personalizables no maneja información crítica en tiempo real, la redundancia pasiva es una opción más costo-eficiente que la redundancia activa. Los tiempos de conmutación de esta táctica son aceptables para la planificación de viajes, y su implementación es menos compleja, lo que la hace ideal para este caso. A pesar de que la redundancia activa proporciona conmutación instantánea, el costo adicional no está justificado dado el contexto del sistema.

### Escenario 2
Consideremos el siguiente escenario para Turi

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| ITN-02           | Disponibilidad           | Fallo en la conexión a la API de recomendaciones  | Servicio externo      | Módulo de Itinerario Personalizable | Operación normal                | El sistema debe continuar operando con una copia local de datos hasta que se restablezca la conexión   | El sistema opera en modo degradado por hasta 10 minutos sin interrupción |


### Táctica Elegida
En este caso, para poder llegar a los niveles de respuesta deseados según el escenario (continuar operando con copia local de datos por hasta 10 minutos), se elige la táctica de **Modo Degradado**. A continuación documentamos los detalles de la decisión.

### Documentación de la Decisión (ADR)

**Título**:  
- Elección entre Modo Degradado vs Reintento de Conexión para manejar fallos en la API de recomendaciones.

**Contexto**:  
- El módulo de itinerario personalizable utiliza una API externa para ofrecer recomendaciones de lugares turísticos, restaurantes y actividades basadas en las preferencias del usuario. Sin embargo, si la API no responde o la conexión se pierde temporalmente, los usuarios no podrán obtener las recomendaciones en tiempo real. Para evitar una interrupción en el servicio, se propone utilizar un mecanismo que permita al sistema seguir funcionando con datos en caché mientras la conexión a la API se restablece.

**Alternativas**:
1. **Modo Degradado**  
   - El sistema opera con funcionalidades limitadas mientras la conexión a la API externa se restablece.
   - Se utilizarán datos en caché para proporcionar recomendaciones basadas en consultas anteriores, de modo que los usuarios no perciban una interrupción inmediata en el servicio.
   - Se puede implementar rápidamente, sin necesidad de grandes cambios en la infraestructura, y es útil en casos de fallos temporales.

2. **Reintento de conexion**  
   - El sistema intenta reconectar con la API externa después de un periodo de tiempo determinado. Si la reconexión falla, el sistema continúa intentándolo hasta que se restablezca la conexión.
   - Aunque puede solucionar el problema, los usuarios experimentarán una pérdida temporal del servicio de recomendaciones, lo que puede afectar negativamente su experiencia.
   - Puede generar una mayor carga de red si se realiza demasiados intentos de reconexión, lo cual no es ideal en condiciones de alta demanda.

**Criterios de Elección**:  
- Necesidad de mantener la experiencia del usuario sin interrupciones visibles.
- Costo de implementar una solución que minimice el impacto durante fallos temporales.
- Impacto de la indisponibilidad de las recomendaciones en el resto del servicio.
- Frecuencia estimada de fallos en la API externa.

**Decisión**:  
- Se elige la **Modo Degradado**.

**Sustento**:  
- El modo degradado permite que el sistema siga ofreciendo recomendaciones basadas en datos en caché, garantizando que los usuarios no perciban una interrupción inmediata en su experiencia. Aunque la información puede no estar completamente actualizada, esta táctica proporciona una solución rápida y eficiente mientras la API se restablece. El reintento de conexión constante podría generar frustración en los usuarios debido a las interrupciones percibidas, lo que hace que el modo degradado sea una opción más adecuada para este escenario.

## Módulo de Autentificación y Seguridad

### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                              | **Fuente del Estímulo** | **Artefacto**                    | **Entorno**                              | **Respuesta**                                      | **Medida de Respuesta**                             |
|------------------|-------------------------|-------------------------------------------|-------------------------|----------------------------------|------------------------------------------|---------------------------------------------------|-----------------------------------------------------|
| ESC-01           | Disponibilidad           | Aumento súbito en la carga de usuarios    | Campaña publicitaria     | Módulo de Autenticación          | Operación durante un evento de marketing | El sistema puede manejar picos de usuarios sin degradar el servicio. | El sistema mantiene una disponibilidad del 99.9% anual |

### Táctica Elegida
Para lograr el objetivo de disponibilidad del 99.9% anual en el escenario, se elige la táctica de **Detección de Fallas**.

### Documentación de la Decisión (ADR)

**Título:**  
Elección entre Monitoreo y Heartbeat para el Módulo de Autenticación.

**Contexto:**  
Durante temporada baja, se anticipa un aumento significativo en la carga de usuarios. Es fundamental detectar problemas de rendimiento o caída del servicio antes de que afecten la experiencia del usuario. Se consideran dos métodos: Monitoreo y Heartbeat.

**Alternativas:**
1. **Monitoreo**  
   - Permite supervisar continuamente la salud del sistema y detectar congestiones.
   - Puede integrarse con alertas automáticas para informar al equipo de soporte en caso de fallos.
   - Requiere una configuración inicial más compleja y puede generar costos adicionales en herramientas de monitoreo.

2. **Heartbeat**  
   - Envía señales periódicas entre procesos para verificar la conectividad.
   - Es menos intensivo en recursos y fácil de implementar.
   - Puede no proporcionar información suficiente sobre el estado del sistema en situaciones complejas.

**Criterios de Elección:**  
- Efectividad en la detección temprana de fallos.
- Costo de implementación y operación.
- Impacto en la carga del sistema durante picos de usuarios.

**Decisión:**  
Se elige **Monitoreo**.

**Sustento:**  
El monitoreo proporciona un enfoque más integral para detectar problemas antes de que se conviertan en fallos críticos, lo que es esencial durante los picos de carga. Aunque la implementación inicial puede ser más compleja, su capacidad para ofrecer alertas automáticas y una visión detallada del estado del sistema justifica la inversión. Esto asegura que el módulo de autenticación mantenga una alta disponibilidad y una experiencia de usuario fluida durante períodos de alta demanda.

---

## Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                    | **Fuente del Estímulo**  | **Artefacto**                     | **Entorno**                       | **Respuesta**                                             | **Medida de Respuesta**                             |
|------------------|-------------------------|---------------------------------|--------------------------|-----------------------------------|-----------------------------------|---------------------------------------------------------|-----------------------------------------------------|
| ESC-02           | Disponibilidad           | Fallo en el servidor de autenticación | Hardware defectuoso      | Módulo de Autenticación           | Operación en horario laboral      | El sistema debe poder recuperar la funcionalidad rápidamente. | El sistema debe recuperar la funcionalidad en menos de 5 minutos. |

### Táctica Elegida
Para alcanzar el objetivo de recuperación en menos de 5 minutos, se elige la táctica de **Recuperación de Fallas**.

### Documentación de la Decisión (ADR)

**Título:**  
Elección entre Redundancia Activa y Redundancia Pasiva para el Módulo de Autenticación.

**Contexto:**  
El sistema de autenticación es crítico y cualquier tiempo de inactividad puede afectar la experiencia del usuario. Se consideran dos enfoques para asegurar la disponibilidad en caso de fallos en el servidor.

**Alternativas:**
1. **Redundancia Activa**  
   - Mantiene múltiples servidores en funcionamiento, permitiendo una transición casi imperceptible en caso de fallos.
   - Minimiza el tiempo de inactividad y asegura una experiencia continua para el usuario.
   - Requiere mayor inversión en infraestructura y costos operativos.

2. **Redundancia Pasiva**  
   - Solo un servidor está activo, y los servidores de respaldo se activan en caso de falla.
   - Menor costo operativo inicial.
   - Puede implicar un tiempo de conmutación más largo, afectando temporalmente la disponibilidad.

**Criterios de Elección:**  
- Importancia de la continuidad del servicio.
- Costos de infraestructura y operación.
- Tolerancia a tiempos de inactividad en el contexto de la aplicación.

**Decisión:**  
Se elige **Redundancia Activa**.

**Sustento:**  
Dada la importancia crítica del sistema de autenticación y la necesidad de minimizar tiempos de inactividad, la redundancia activa es la mejor opción. A pesar de los costos adicionales, la capacidad de ofrecer una experiencia ininterrumpida a los usuarios es vital para mantener la confianza en la plataforma. Este enfoque permite una recuperación rápida y eficaz en caso de fallos, cumpliendo así con el objetivo de disponibilidad del sistema.
