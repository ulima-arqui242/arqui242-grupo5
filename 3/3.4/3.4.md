# 3.4. Mapeo entre elementos de Arquitectura

![Mapeo entre elementos de Arqui](MapeoEntreElementos.png)

## Descripción de Arquitectura

### Frontend (ReactJS):
El frontend es desarrollado con ReactJS, que envía solicitudes HTTP (REST API) a través de Kong API Gateway para interactuar con los microservicios del backend.

### Kong API Gateway:
Kong actúa como un gateway que gestiona todas las solicitudes entrantes desde el frontend hacia los microservicios. Facilita el manejo de seguridad, autenticación, balanceo de carga y la administración de rutas hacia los distintos microservicios.
Microservicios (Backend con Node.js y Docker):

### Microservicios definidos:
- Cada microservicio corre en su propio entorno en contenedores de Docker y tiene responsabilidades específicas. Todos los microservicios están desarrollados con Node.js.
- Los servicios están divididos según funciones específicas del sistema, lo que permite una arquitectura flexible y escalable.

  1. **Auth Service:** Responsable de la autenticación de usuarios. Se integra con el sistema de autorización mediante JWT. Usa PostgreSQL para almacenar credenciales y tokens.
  2. **User Service:** Gestiona la información y perfil de los usuarios. Accede a una base de datos PostgreSQL para manejar la información personal y otros datos asociados a los usuarios.
  3. **Itinerary Service:** Maneja los itinerarios creados por los usuarios. También está respaldado por PostgreSQL, ya que se centra en datos estructurados como los viajes, las actividades planeadas, y las interacciones del usuario.
  4. **Reviews Service:** Encargado de gestionar las reseñas y comentarios de los usuarios. Usa una base de datos MongoDB, lo cual es adecuado para manejar datos no estructurados o semi-estructurados como las reseñas, imágenes, y otros elementos multimedia.
  5. **Admin Service:** Proporciona funcionalidades de administración, como gestión de usuarios, moderación de contenido, etc. También usa PostgreSQL.
  6. **Reports Service:** Este servicio se encarga de manejar los reportes realizados por los usuarios en la plataforma. Está conectado a MongoDB para manejar grandes volúmenes de datos.
  7. **Main Service:** Este servicio es clave para gestionar datos relacionados con los locales y las ubicaciones geográficas que se muestran en el mapa. Obtiene y maneja los datos de latitud y longitud de los locales para enviarlos al frontend y mostrarlos en el mapa. Utiliza PostgreSQL para gestionar estos datos estructurados, probablemente relacionados con los detalles de los negocios y sus ubicaciones.

### Bases de Datos:
- **PostgreSQL:** Se utiliza para manejar datos relacionales y estructurados en la mayoría de los microservicios como el Auth, User, Itinerary, Admin, y Main Services. Esto es ideal para datos que requieren integridad y transacciones fuertes.
- **MongoDB:** Utilizado en servicios que requieren mayor flexibilidad en el almacenamiento de datos, como en el Reviews Service (para manejar reseñas y comentarios con imágenes o videos) y el Reports Service (para generar reportes basados en grandes cantidades de datos no estructurados o semi-estructurados).

### Flujo de Datos para el Mapa:
El Main Service obtiene la información de los restaurantes, actividades, sitios arqueológicos, etc., incluyendo sus coordenadas de latitud y longitud desde la base de datos PostgreSQL. Esta información es enviada al frontend mediante una solicitud HTTP y el front la utiliza para integrar y mostrar las ubicaciones en un mapa de Google Maps a través de la API de Google Maps.

### Google Cloud Storage:
Para el almacenamiento de multimedia en los módulos de Reseñas y comentarios, y de Blog, se utilizará Google Cloud Storage, mientras que en las bases de datos se guardará solo la ruta a los archivos.