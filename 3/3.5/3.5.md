# 3.5. Elección de Tecnología

## Módulo de Autentificación y Seguridad

### Decisión 1: Elección del lenguaje de programación para el backend de Turi

**Título**:  
- Elección del lenguaje de programación para el backend.

**Contexto**:  
- El equipo de desarrollo de Turi tiene experiencia en **Node.js** (JavaScript), y se enfrenta a la decisión de elegir el lenguaje más adecuado para el backend, que debe manejar la autenticación, gestión de usuarios, itinerarios, reseñas y otros módulos críticos. La plataforma también está planificando su escalabilidad para soportar un mayor número de usuarios, por lo que el lenguaje elegido debe facilitar la rápida iteración y soportar arquitecturas basadas en microservicios.

**Alternativas**:  
1. **Node.js (JavaScript)**  
   - Muy conocido por el equipo de desarrollo de Turi.
   - Ofrece alta velocidad en el desarrollo y unificación del lenguaje en todo el stack (frontend y backend).
   - Soporte nativo para la creación de APIs REST y microservicios, ideal para arquitecturas distribuidas.
   - Gran ecosistema de bibliotecas y herramientas disponibles, además de su capacidad para manejar grandes cantidades de conexiones simultáneas gracias a su modelo no bloqueante.

2. **Java (Spring Boot)**  
   - Mayor robustez y seguridad, muy adecuado para aplicaciones empresariales de gran escala.
   - Soporta concurrencia y escalabilidad, pero es un poco más lento en términos de velocidad de desarrollo comparado con Node.js.
   - Más rígido y estructurado, lo que lo hace ideal para entornos donde la seguridad y la estabilidad son las prioridades.

**Criterios de Elección**:  
- Familiaridad del equipo con el lenguaje.
- Velocidad de desarrollo e iteración.
- Soporte para arquitecturas basadas en microservicios.
- Rendimiento y escalabilidad.
- Mantenibilidad a largo plazo.

**Decisión**:  
- Se elige Node.js.

**Sustento**:  
- Node.js es el lenguaje más adecuado para el equipo de Turi, ya que el equipo tiene experiencia en su uso, lo que facilitará el desarrollo y mantenimiento de la plataforma. La unificación del stack con JavaScript tanto en el frontend como en el backend también reduce la complejidad del proyecto y mejora la velocidad de desarrollo. Además, Node.js ofrece un alto rendimiento para manejar múltiples conexiones simultáneas y es ideal para una arquitectura de microservicios debido a su naturaleza no bloqueante y su ecosistema de herramientas para el desarrollo de APIs REST.

---

### Decisión 2: Uso de PostgreSQL para el almacenamiento de credenciales de usuario

**Título**:  
- Uso de una base de datos relacional (PostgreSQL) para almacenar credenciales de usuario.

**Contexto**:  
- La plataforma Turi manejará información de credenciales y perfiles de usuario, lo que requiere una base de datos confiable para almacenar y gestionar estos datos. Se necesita evaluar si utilizar una base de datos relacional (PostgreSQL) o una base de datos no relacional para esta tarea.

**Alternativas**:  
1. **Base de datos relacional (PostgreSQL)**  
   - Alta consistencia y soporte para transacciones ACID.
   - Perfecto para datos estructurados como credenciales y roles de usuarios.
   - Bien conocida por el equipo de backend de Turi.
   
2. **Base de datos no relacional (MongoDB)**  
   - Escalabilidad horizontal y flexibilidad en la estructura de datos.
   - Puede manejar fácilmente grandes volúmenes de datos no estructurados, pero la consistencia puede ser menor.

**Criterios de Elección**:  
- Integridad y consistencia de los datos.
- Escalabilidad y flexibilidad en el manejo de los datos.
- Familiaridad del equipo con la tecnología.
- Seguridad y control sobre el acceso a datos.

**Decisión**:  
- Se elige PostgreSQL.

**Sustento**:  
- PostgreSQL es más adecuado para el manejo de credenciales debido a sus características de consistencia y soporte para transacciones seguras. Además, el equipo de backend de Turi ya tiene experiencia con esta tecnología, lo que facilita la implementación y mantenimiento de la base de datos.

---

### Decisión 3: Uso de arquitectura basada en microservicios

**Título**:  
- Elección entre arquitectura monolítica vs microservicios.

**Contexto**:  
- La plataforma Turi está creciendo rápidamente, con más de 10,000 usuarios y planes para expandir tanto la base de usuarios como la funcionalidad. La necesidad de escalar las funcionalidades y manejar la seguridad del sistema plantea la cuestión de si mantener una arquitectura monolítica o adoptar microservicios para mejorar la escalabilidad y la independencia de los módulos.

**Alternativas**:  
1. **Arquitectura monolítica**  
   - Mantiene toda la funcionalidad en un solo código base y despliegue.
   - Fácil de desarrollar e implementar en fases iniciales del proyecto.
   - Más difícil de escalar a medida que crecen las funcionalidades y la base de usuarios.

2. **Arquitectura basada en microservicios**  
   - Divide la funcionalidad en múltiples servicios independientes, cada uno manejando un conjunto específico de funcionalidades (autenticación, itinerarios, reseñas, etc.).
   - Escalable y permite la implementación independiente de cada módulo.
   - Mayor complejidad en la coordinación entre los microservicios, lo que requiere más esfuerzo de orquestación y monitoreo.

**Criterios de Elección**:  
- Escalabilidad de la plataforma.
- Independencia de los módulos para reducir riesgos de fallos globales.
- Habilidades del equipo en gestión de servicios distribuidos.
- Mantenibilidad y facilidad de actualización o despliegue de nuevas funcionalidades.

**Decisión**:  
- Se elige la arquitectura basada en microservicios.

**Sustento**:  
- Dada la rápida expansión de Turi, la arquitectura de microservicios es ideal para soportar el crecimiento de la plataforma, permitiendo la escalabilidad y el despliegue independiente de funcionalidades críticas como autenticación, seguridad, itinerarios y gestión de contenido. La independencia entre servicios permite gestionar mejor los fallos en un servicio sin afectar el resto de la plataforma, mejorando así la resiliencia.

---

### Decisión 4: Uso de Autenticación Multifactor (MFA) para mejorar la seguridad de acceso

**Título**:  
- Uso de Autenticación Multifactor (MFA) para mejorar la seguridad de acceso.

**Contexto**:  
- Turi es una plataforma de viajes con aproximadamente 10,000 usuarios. A medida que crece, la seguridad es clave, especialmente con la expansión hacia nuevas funcionalidades y la necesidad de proteger información sensible de los usuarios. Además, se busca garantizar que los accesos no autorizados estén controlados y la autenticación sea sólida.

**Alternativas**:  
1. **Autenticación simple (usuario y contraseña)**  
   - Facilita la experiencia del usuario.
   - Menor complejidad técnica y tiempo de implementación.
   - Menos segura ante ataques de fuerza bruta o robos de credenciales.
   
2. **Autenticación multifactor (MFA)**  
   - Aumenta significativamente la seguridad al requerir un segundo factor, como un código enviado por SMS o correo electrónico.
   - Puede agregar una ligera fricción al inicio de sesión, pero asegura un mayor nivel de protección para los usuarios.
   - Necesita más infraestructura para enviar códigos y mantener el servicio de MFA.

**Criterios de Elección**:  
- Aumento en la seguridad de las cuentas de usuario.
- Necesidad de proteger la información personal y las configuraciones de viaje.
- Experiencia de usuario que permita un inicio de sesión seguro pero sencillo.
- Escalabilidad de la plataforma para manejar el crecimiento de usuarios.

**Decisión**:  
- Se elige la autenticación multifactor (MFA).

**Sustento**:  
- La autenticación multifactor proporciona un nivel de seguridad necesario para una plataforma que manejará más usuarios y datos confidenciales. Aunque añade cierta complejidad al proceso de autenticación, los beneficios superan el costo en términos de seguridad. La implementación de MFA reducirá la probabilidad de acceso no autorizado, protegiendo mejor las cuentas y mejorando la confianza de los usuarios.

---

### Decisión 5: Uso de autenticación basada en tokens (JWT) para gestionar las sesiones de usuario

**Título**:  
- Uso de autenticación basada en tokens (JWT) para gestionar las sesiones de usuario.

**Contexto**:  
- El módulo de autenticación de Turi debe gestionar sesiones de miles de usuarios simultáneamente, especialmente durante campañas de crecimiento. Es necesario asegurar la escalabilidad, seguridad, y facilidad de implementación para manejar estas sesiones de forma efectiva.

**Alternativas**:  
1. **Autenticación basada en sesiones (session cookies)**  
   - Las sesiones se mantienen en el servidor y se identifican mediante cookies.
   - Es segura y confiable, pero consume recursos del servidor y puede dificultar la escalabilidad al requerir almacenamiento de sesiones.
   - Requiere que los usuarios estén conectados al mismo servidor o implique el uso de almacenamiento compartido.

2. **Autenticación basada en tokens (JWT - JSON Web Tokens)**  
   - Los tokens se envían al cliente y no necesitan ser almacenados en el servidor, lo que permite que sea más escalable.
   - Ideal para sistemas distribuidos y microservicios, ya que permite la autenticación sin estado.
   - Puede ser menos seguro si los tokens no se manejan correctamente, ya que estos se almacenan en el cliente.

**Criterios de Elección**:  
- Escalabilidad para manejar un número creciente de usuarios concurrentes.
- Facilidad de integración en una arquitectura de microservicios.
- Requerimientos de seguridad y mitigación de riesgos.
- Consumo de recursos del servidor.

**Decisión**:  
- Se elige autenticación basada en tokens (JWT).

**Sustento**:  
- La autenticación basada en tokens (JWT) es más adecuada para Turi debido a su escalabilidad y compatibilidad con una arquitectura distribuida. Los tokens permiten que el backend maneje las sesiones de manera más eficiente, sin la necesidad de almacenamiento de estado en el servidor. Esto resulta especialmente valioso dado el crecimiento esperado en el número de usuarios.

---

### Decisión 6: Protección contra ataques de fuerza bruta mediante bloqueo temporal

**Título**:  
- Uso de bloqueo temporal para protección contra ataques de fuerza bruta.

**Contexto**:  
- Turi necesita protegerse de intentos de acceso no autorizado, como ataques de fuerza bruta, donde un atacante intenta adivinar contraseñas a través de múltiples intentos fallidos. La plataforma debe asegurar que los usuarios legítimos no se vean afectados mientras se mitigan estos riesgos.

**Alternativas**:  
1. **Bloqueo temporal tras múltiples intentos fallidos**  
   - Bloquea la cuenta del usuario tras un número determinado de intentos fallidos.
   - Protege contra ataques, pero puede causar frustración en usuarios legítimos que se bloquean accidentalmente.
   
2. **Captcha tras varios intentos fallidos**  
   - Agrega un paso de verificación visual (Captcha) tras varios intentos fallidos.
   - Asegura que solo humanos puedan seguir intentando iniciar sesión, pero no bloquea la cuenta del usuario.
   - Menos intrusivo y mantiene la cuenta abierta.

**Criterios de Elección**:  
- Nivel de seguridad requerido para evitar ataques de fuerza bruta.
- Minimización de impacto en usuarios legítimos.
- Costos de implementación y mantenimiento.

**Decisión**:  
- Se elige la opción de bloqueo temporal tras varios intentos fallidos.

**Sustento**:  
- El bloqueo temporal tras varios intentos fallidos ofrece una protección efectiva contra los ataques de fuerza bruta, reduciendo significativamente el riesgo de acceso no autorizado. Aunque puede resultar en algunos usuarios bloqueados, es una medida más segura para Turi en comparación con el Captcha, ya que garantiza la interrupción de los intentos automatizados.
