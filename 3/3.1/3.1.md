# 3.1. Asignación de Responsabilidades

## Decisiones sobre asignación de responsabilidades de toda la plataforma

### Decisión 1:  
**Título:**
- Decisión entre arquitectura monolítica y microservicios.

**Contexto:**  
Turi es una plataforma que incluye múltiples módulos como la creación de itinerarios, reseñas y comentarios de usuarios, administración de contenido, servicios premium, blog de la comunidad, etc. La plataforma está creciendo rápidamente con más de 10,000 usuarios, y se espera que se amplíe aún más al aumentar la colaboración con socios clave y creadores de contenido. Para ello, es necesario asegurar la escalabilidad, mantenibilidad y la capacidad de añadir nuevas funcionalidades de forma eficiente. Además, los distintos módulos tienen características específicas, lo que es un desafío en la forma en que se asignan las responsabilidades en el sistema de forma que ningún módulo se comprometa por el otro.

**Alternativas:**
1. **Arquitectura monolítica:**
     - Todos los módulos y funcionalidades se agrupan en una única aplicación desplegable, por lo que tanto el desarrollo como el despliegue se realiza de forma más rápida.
     - Fácil de implementar inicialmente, con menor complejidad en la comunicación entre componentes al todos estar conectados por un mismo servicio.
     - A medida que la plataforma crece, la mantenibilidad y escalabilidad se vuelven más difíciles al introducir nuevas funcionalidades o escalar módulos.
     - Los problemas en un módulo pueden afectar a toda la aplicación, lo que interrumpe la disponibilidad del servicio de Turi.
     - Actualizaciones restrictivas y lentas, pues al realizar cambios se debe actualizar toda la pila implementando también una versión actualizada de todo.
     - Realizar pruebas integrales es más rápido, pues se tiene una única unidad centralizada.
     - Hay limitaciones de tecnologías, pues solo se utilizan las que ya están en él.

2. **Arquitectura de microservicios:**
     - Cada módulo se implementa como un servicio independiente.
     - Permite escalar módulos sin interrumpir el funcionamiento de otros.
     - Desarrollo y despliegue independiente para cada microservicios.
     - Permite que los equipos trabajen en diferentes servicios de manera independiente, mejorando el desarrollo y despliegue continuo sin comprometer el desarrollo de otros módulos.
     - La complejidad aumenta en términos de gestión de infraestructura, comunicación entre servicios y monitoreo, especialmente si hay muchas interdependencias entre módulos.
     - Cada  microservicio puede tener su propio coste, lo cual incrementa el coste de la infraestructura.
     - Se pueden realizar actualizaciones con mayor frecuencia, de forma fiable y mejorando tiempos de rendimiento.
     - Se puede aliviar la presión en algún microservicio que esté llegando al tope de su capacidad, esto se hace creando una nueva instrancia dentro del clúster que lo acompañe.
     - Hay flexbilidad en las elecciones de tecnologías que se pueden incluir.

**Criterios de elección:**
- **Escalabilidad:** La capacidad de escalar individualmente módulos como servicio premium, reseñas, blog e itinerarios es crítica.
- **Mantenibilidad:** A medida que Turi crece, agregar funcionalidades o realizar cambios sin afectar todo el sistema es esencial.
- **Velocidad de desarrollo:** La posibilidad de que equipos trabajen en paralelo en diferentes partes del sistema para asegurar que Turi pueda sacar actualizaciones rápido que se adapten a los nuevos requerimientos de los usuarios de la plataforma.
- **Infraestructura:** Capacidad del equipo para gestionar la infraestructura.

**Decisión:**
Arquitectura de microservicios.

**Sustento:**
La arquitectura de microservicios es más adecuada para Turi, ya que ofrece la escalabilidad y mantenibilidad necesarias a medida que el sistema crece. Los módulos, en especial el servicio premium, tienen diferentes características y demandas, las cuales es crucial poder escalar independientemente. Aunque introduce complejidad en la infraestructura, esta puede ser gestionada con herramientas modernas como Kubernetes, Docker, y plataformas de nube. La capacidad de desarrollar, desplegar y escalar componentes de forma independiente asegura que la plataforma podrá crecer y adaptarse a nuevos requerimientos sin comprometer la experiencia del usuario que ya se vienen teniendo en la plataforma, asegurando la retención de los usuarios también.

### Decisión 2:  
**Título:**
- Uso de bases de datos distribuidas o bases de datos relacionales monolíticas.

**Contexto:**
La plataforma de Turi almacena una gran cantidad de información relacionada con usuarios, itinerarios, reseñas, servicios premium, etc. Esta información debe estar disponible de forma rápida, especialmente en escenarios de alta demanda como fechas de alta temporada de viajes, y la capacidad de escalar el sistema de almacenamiento es crucial con el enfoque de albergar más usuarios y más opciones para los mismos. Además, se requiere soportar búsquedas complejas y transacciones seguras, como la creación de itinerarios y el pago del servicio premium.

**Alternativas:**
1. **Bases de datos relacionales monolíticas (SQL)**
   - Tradicionalmente usadas para sistemas de transacciones, ofreciendo consistencia y soporte robusto para las relaciones entre entidades.
   - Fácil de manejar con herramientas maduras, pero puede ser difícil de escalar horizontalmente a medida que la plataforma crezca.
   - Ideal para transacciones ACID (atomicidad, consistencia, aislamiento y durabilidad) y consultas complejas, pero puede ser ineficiente en cargas de lectura/escritura intensivas si no se maneja adecuadamente el escalamiento.
   - Funcionan bien para un tamaño de datos moderado, pero su rendimiento disminuye cuando se trata de un gran número de consultas simultáneas.

2. **Bases de datos distribuidas (NoSQL)**
   - Las bases distribuidas están diseñadas para manejar millones de operaciones simultáneas de lectura y escritura.
   - Permiten escalar horizontalmente a través de múltiples servidores, lo que es ideal para un crecimiento rápido.
   - Si uno falla, los otros nodos pueden continuar sirviendo las solicitudes, lo que ofrece mayor disponibilidad.
   - Mejor desempeño en escenarios de lectura/escritura intensiva.
   - Sacrifican algo de consistencia mediante el "eventual consistency" a favor de disponibilidad y partición. Esto significa que los datos pueden no estar siempre actualizados en todos los nodos instantáneamente.
   - No se manejan tan bien en transacciones complejas que requieren estricta consistencia.

**Criterios de elección:**
- **Escalabilidad:** La capacidad de manejar grandes cantidades de datos y aumentar la capacidad de manera eficiente es clave.
- **Performance:** El rendimiento en la lectura y escritura es importante, especialmente en módulos como reseñas.
- **Integridad y transacciones:** Se debe garantizar la integridad de datos en ciertas áreas, como la autenticación o el módulo de pagos.
- **Costos de mantenimiento:** Consideración de los recursos y el tiempo de mantenimiento de la infraestructura de bases de datos.
- **Latencia:** Es importante el acceso rápido a los datos en tiempos cortos.

**Decisión:**
Se opta por un enfoque híbrido: Bases de datos relacionales para módulos transaccionales como el de itinerario y NoSQL para módulos de alto volumen y lectura intensiva como las reseñas y comentarios.

**Sustento:**
Este enfoque permite aprovechar las ventajas de ambas arquitecturas: la solidez de las bases de datos relacionales para los módulos que requieren transacciones consistentes y las capacidades de escalabilidad y rapidez de NoSQL para los módulos que manejan grandes volúmenes de datos, como las reseñas. Esto asegura que la plataforma sea escalable sin comprometer la consistencia en áreas críticas.


## Módulo de reseñas y comentarios

### Decisión 1:

**Título:**
- Implementación de sistema de moderación de contenido para reseñas y comentarios.

**Contexto:**
Las reseñas en Turi permiten que los usuarios suban su calificación del lugar, una descripción de su experiencia, y esta puede ser acompañada de fotos y videos. Para mantener la integridad de la plataforma y asegurar que el contenido inapropiado no llegue a otros usuarios, es fundamental implementar un sistema de moderación que sea efectivo y escalable. El sistema debe gestionar grandes cantidades de reseñas y contenido multimedia, garantizando que la revisión sea casi rápida y precisa para salvaguardar la integridad de los usuarios.

**Alternativas:**
1. **Moderación manual**
   - Los administradores revisan manualmente cada reseña para asegurar que cumpla con las políticas de la plataforma.
   - Es muy preciso porque se realiza un análisis exhaustivo de cada reseña, pero no escalable para grandes volúmenes de contenido.
   - Requiere una gran cantidad de recursos humanos y tiempo para revisar cada reseña.
   - Aumenta los costos traducidos en horas hombre
   - No garantiza que el contenido inapropiado se filtre antes de estar visible.
2. **Moderación automática basada en IA**
   - Se utiliza inteligencia artificial para analizar texto, imágenes y videos en busca de contenido inapropiado antes de publicarse.
   - Escalable para grandes volúmenes de contenido.
   - Puede tener errores, pero se puede complementar con moderación humana para los casos más complejos.
   - Puede requerir más pasos para su implementación como configuraciones previas a lo que requiera el negocio.

**Criterios de Elección:**
- **Escalabilidad:** Capacidad de manejar grandes volúmenes de contenido.
- **Precisión:** El sistema debe ser lo suficientemente preciso para evitar que publicaciones con contenido inapropiado se mantengan visibles en la plataforma.
- **Costos:** Costo de implementar una solución automatizada en comparación al costo de contratar moderadores humanos.
- **Tiempo de respuesta:** La moderación debe ser rápida para no retrasar la experiencia del usuario.

**Decisión:**
Se decide implementar una moderación automática basada en IA, con una capa de administración manual para casos complejos, incluyendo los reportes de los usuarios.

**Sustento:**
La solución basada en IA permite escalar eficientemente la moderación de contenido sin depender de un equipo humano grande de moderadores. Esto conviene porque, a medida que Turi crezca, el sistema podrá manejar el aumento en la cantidad de reseñas y contenido multimedia sin comprometer la calidad de la experiencia de usuario. Además, la capa de moderación manual complementa la IA en casos más complicados, garantizando un balance entre precisión y escalabilidad, porque la IA puede ser precisa hasta cierto punto, para ello se requiere del ojo humano y criterio para tratar ciertos casos.
